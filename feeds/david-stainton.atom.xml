<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>code sabbatical</title><link href="/" rel="alternate"></link><link href="/feeds/david-stainton.atom.xml" rel="self"></link><id>/</id><updated>2014-08-12T13:00:00+02:00</updated><entry><title>create a Tahoe-LAFS onion grid</title><link href="/create-a-tahoe-lafs-onion-grid.html" rel="alternate"></link><updated>2014-08-12T13:00:00+02:00</updated><author><name>David Stainton</name></author><id>tag:,2014-08-12:create-a-tahoe-lafs-onion-grid.html</id><summary type="html">&lt;h3&gt;how to create a Tahoe-LAFS onion grid&lt;/h3&gt;
&lt;p&gt;I think a workshop for creating a collective onion grid would be a great
activity for hackerspaces and cryptoparties. It will allow participants to
securely backup and share files. Each participant configures
one or more storage servers. The idea is that all the storage servers
announce themselves to the same introducer node(s). Clients using the
grid use the introducer node(s) to discover new storage servers.&lt;/p&gt;
&lt;h4&gt;what is an onion grid?&lt;/h4&gt;
&lt;p&gt;An onion grid refers to a Tahoe-LAFS storage grid, a collection of Tahoe-LAFS storage servers that are only accessible via Tor hidden services. That means the identity/location of the storage servers are protected by the Tor network.&lt;/p&gt;
&lt;p&gt;At this time the Tor Project is redesigning Tor hidden services to have more powerful security and anonymity guarantees; &lt;a href="https://blog.torproject.org/blog/hidden-services-need-some-love"&gt;Tor hidden services need some love&lt;/a&gt;.
Endeavors using Tahoe-LAFS onion grids will benefit from these future design changes to Tor Hidden Services.&lt;/p&gt;
&lt;h4&gt;use Ansible to configure an onion grid storage server&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;note:&lt;/strong&gt; this procedure is written for use with Tails but
could easily be applied to other operating systems&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. setup basic Ansible working directory hierarchy&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mkdir -p /home/amnesia/Persistent/projects/ansible-base/roles
mkdir -p /home/amnesia/Persistent/projects/ansible-base/host_vars
&lt;span class="nb"&gt;cd&lt;/span&gt; ~/Persistent/projects/ansible-base/roles
git clone git+https://github.com/david415/ansible-tahoe-lafs.git
git clone git+https://github.com/david415/ansible-tor.git
&lt;span class="nb"&gt;cd&lt;/span&gt; ..
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;2. install Ansible in a python virtual env&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Get the latest stable python virtualenv and cryptographically verify it.
save it to: &lt;strong&gt;~/Persistent/virtualenv-x.xx.x/&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Then create a virtual env to run ansible:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;~/Persistent/virtualenv-x.xx.x/virtualenv.py --system-site-packages Persistent/virtenv-ansible
New python executable in Persistent/virtenv-ansible/bin/python
Installing setuptools, pip...done.
amnesia@amnesia:~&lt;span class="err"&gt;$&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Activate the virtual env and install ansible and dependencies:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;. ~/Persistent/virtenv-ansible/bin/activate
sudo apt-get install build-essential python-dev
pip install ecdsa markupsafe paramiko PyYAML Jinja2 httplib2
pip install ansible
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Place these two Ansible roles for Tor and Tahoe-LAFS in the roles directory:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /home/amnesia/Persistent/projects/ansible-base/roles
git clone https://github.com/david415/ansible-tahoe-lafs.git
git clone https://github.com/david415/ansible-tor.git
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;3. use Ansible to configure an introducer and storage node on one machine&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Configure a playbook for :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;cp roles/ansible-tahoe-lafs/playbook-examples/oniongrid_introducer_storage.yml .
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You should edit this &lt;strong&gt;oniongrid_introducer_storage.yml&lt;/strong&gt; playbook because it makes some assumptions for instance:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;you want your introducer name name set to "IntroducerNode"&lt;/li&gt;
&lt;li&gt;TCP port numbers are set to arbitary values which you may want to change&lt;/li&gt;
&lt;li&gt;this playbook assumes you are using Tails and want the introducer inventory stored in &lt;strong&gt;/home/amnesia/Persistent/projects/ansible-base/tahoe-lafs_introducers&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;this playbook assumes your remote ssh user is "human" and has a home directory in "/home/human"&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;hosts&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;onion-introducer-storage&lt;/span&gt;
  &lt;span class="l-Scalar-Plain"&gt;vars&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt;
    &lt;span class="l-Scalar-Plain"&gt;hidden_services_parent_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/var/lib/tor/services&amp;quot;&lt;/span&gt;
    &lt;span class="l-Scalar-Plain"&gt;introducer_node_name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;IntroducerNode&amp;quot;&lt;/span&gt;
    &lt;span class="l-Scalar-Plain"&gt;introducer_tub_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;33000&amp;quot;&lt;/span&gt;
    &lt;span class="l-Scalar-Plain"&gt;introducer_web_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;33001&amp;quot;&lt;/span&gt;
    &lt;span class="l-Scalar-Plain"&gt;storage_service_name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;storage&amp;quot;&lt;/span&gt;
    &lt;span class="l-Scalar-Plain"&gt;storage_tub_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;34000&amp;quot;&lt;/span&gt;
    &lt;span class="l-Scalar-Plain"&gt;storage_web_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;34001&amp;quot;&lt;/span&gt;
    &lt;span class="l-Scalar-Plain"&gt;hidden_services&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p-Indicator"&gt;[&lt;/span&gt;
      &lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;intro-web&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;ports&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p-Indicator"&gt;[{&lt;/span&gt; &lt;span class="nv"&gt;virtport&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;introducer_web_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;target&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;127.0.0.1:{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;introducer_web_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt; &lt;span class="p-Indicator"&gt;}]&lt;/span&gt; &lt;span class="p-Indicator"&gt;},&lt;/span&gt;
      &lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;introducer&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;ports&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p-Indicator"&gt;[{&lt;/span&gt; &lt;span class="nv"&gt;virtport&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;introducer_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;target&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;127.0.0.1:{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;introducer_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt; &lt;span class="p-Indicator"&gt;}]&lt;/span&gt; &lt;span class="p-Indicator"&gt;},&lt;/span&gt;
      &lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;storage-web&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;ports&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p-Indicator"&gt;[{&lt;/span&gt; &lt;span class="nv"&gt;virtport&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;storage_web_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;target&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;127.0.0.1:{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;storage_web_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt; &lt;span class="p-Indicator"&gt;}]&lt;/span&gt; &lt;span class="p-Indicator"&gt;},&lt;/span&gt;
      &lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;storage&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;ports&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p-Indicator"&gt;[{&lt;/span&gt; &lt;span class="nv"&gt;virtport&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;storage_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;target&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;127.0.0.1:{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;storage_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt; &lt;span class="p-Indicator"&gt;}]&lt;/span&gt; &lt;span class="p-Indicator"&gt;},&lt;/span&gt;
    &lt;span class="p-Indicator"&gt;]&lt;/span&gt;
  &lt;span class="l-Scalar-Plain"&gt;roles&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt;
    &lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;role&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;ansible-tor&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tor_wait_for_hidden_services&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;yes&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tor_distribution_release&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;wheezy&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tor_ExitPolicy&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;reject&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;*:*&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tor_hidden_services&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;hidden_services&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tor_hidden_services_parent_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;hidden_services_parent_dir&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;sudo&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;yes&lt;/span&gt;
      &lt;span class="p-Indicator"&gt;}&lt;/span&gt;
    &lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;role&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;ansible-tahoe-lafs&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_introducer&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;yes&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_local_introducers_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/home/amnesia/Persistent/projects/ansible-base/tahoe-lafs_introducers&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;use_torsocks&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;yes&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_hidden_service_name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;introducer&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tor_hidden_services_parent_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;hidden_services_parent_dir&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_introducer_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;introducer_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_web_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;introducer_web_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_tub_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;introducer_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_shares_needed&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;2&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_shares_happy&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;3&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_shares_total&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;4&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;backports_url&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;http://ftp.de.debian.org/debian/&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;backports_distribution_release&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;wheezy-backports&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_source_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/home/human/tahoe-lafs-src&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_run_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/home/human/tahoe_introducer&amp;quot;&lt;/span&gt;
      &lt;span class="p-Indicator"&gt;}&lt;/span&gt;
    &lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;role&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;ansible-tahoe-lafs&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_local_introducers_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/home/amnesia/Persistent/projects/ansible-base/tahoe-lafs_introducers&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_storage_enabled&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_hidden_service_name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;storage&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tor_hidden_services_parent_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;hidden_services_parent_dir&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_web_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;storage_web_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_tub_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;storage_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_shares_needed&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;2&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_shares_happy&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;3&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_shares_total&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;4&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;backports_url&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;http://ftp.de.debian.org/debian/&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;backports_distribution_release&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;wheezy-backports&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_source_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/home/human/tahoe-lafs-src&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
        &lt;span class="nv"&gt;tahoe_run_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/home/human/tahoe_storage&amp;quot;&lt;/span&gt;
      &lt;span class="p-Indicator"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If say for instance you've got an Ansible inventory file called &lt;strong&gt;master-host-inventory&lt;/strong&gt;
it could look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;[onion-introducer-storage]&lt;/span&gt;
&lt;span class="na"&gt;zzz.zzz.zzz.zzz tahoe_nickname&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;RobotSmashPunyHumans&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The beginning of this playbook specifies the &lt;strong&gt;onion-introducer-storage&lt;/strong&gt; host group.
Run the playbook like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ansible-playbook -i master-host-inventory oniongrid-storage-nodes.yml -u human
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If all goes well your new introducer FURL should be placed locally in this file:
&lt;strong&gt;/home/amnesia/Persistent/projects/ansible-base/tahoe-lafs_introducers&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. use Ansible to configure the other storage nodes in your grid&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;note:&lt;/strong&gt; this step requires you to have a Tahoe-LAFS introducer FURL... perhaps generated from the previous step&lt;/p&gt;
&lt;p&gt;Firstly, if you've skipped the previous step you'll need to create an Ansible inventory file, e.g. at this location:
&lt;strong&gt;/home/amnesia/Persistent/projects/ansible-base/master-host-inventory&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Use Ansible to configure one or more storage servers where we specify the Tahoe nickname like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;[onion-storage]&lt;/span&gt;
&lt;span class="na"&gt;xxx.xxx.xxx.xxx tahoe_nickname&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;RobotOnlyStorageNode&lt;/span&gt;
&lt;span class="na"&gt;yyy.yyy.yyy.yyy tahoe_nickname&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;RobotsAgainstHumans&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Configure a playbook for your Onion grid storage servers:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;cp roles/ansible-tahoe-lafs/playbook-examples/oniongrid-storage-nodes.yml .
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You must edit &lt;strong&gt;oniongrid-storage-nodes.yml&lt;/strong&gt;, it needs to contain appropriate settings such as the introducer FURL for your onion grid:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;hosts&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="l-Scalar-Plain"&gt;onion-storage&lt;/span&gt;
&lt;span class="l-Scalar-Plain"&gt;vars&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt;
&lt;span class="l-Scalar-Plain"&gt;oniongrid_introducer_furl&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pb://iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii@bbbbbbbbbbbbbbbb.onion:37483/swisssssss&amp;quot;&lt;/span&gt;
&lt;span class="l-Scalar-Plain"&gt;oniongrid_hidden_service_name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;tahoe-storage&amp;quot;&lt;/span&gt;
&lt;span class="l-Scalar-Plain"&gt;oniongrid_tub_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;37493&amp;quot;&lt;/span&gt;
&lt;span class="l-Scalar-Plain"&gt;oniongrid_web_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;3456&amp;quot;&lt;/span&gt;
&lt;span class="l-Scalar-Plain"&gt;oniongrid_hidden_services_parent_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/var/lib/tor/services&amp;quot;&lt;/span&gt;
&lt;span class="l-Scalar-Plain"&gt;oniongrid_hidden_services&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p-Indicator"&gt;[&lt;/span&gt;
&lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;tahoe-web&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;ports&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p-Indicator"&gt;[{&lt;/span&gt; &lt;span class="nv"&gt;virtport&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_web_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;target&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;127.0.0.1:{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_web_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt; &lt;span class="p-Indicator"&gt;}]&lt;/span&gt; &lt;span class="p-Indicator"&gt;},&lt;/span&gt;
&lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;tahoe-storage&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;ports&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="p-Indicator"&gt;[{&lt;/span&gt; &lt;span class="nv"&gt;virtport&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;target&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;127.0.0.1:{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt; &lt;span class="p-Indicator"&gt;}]&lt;/span&gt; &lt;span class="p-Indicator"&gt;},&lt;/span&gt;
&lt;span class="p-Indicator"&gt;]&lt;/span&gt;
&lt;span class="l-Scalar-Plain"&gt;roles&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt;
&lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;role&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;ansible-tor&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tor_wait_for_hidden_services&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;yes&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tor_distribution_release&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;wheezy&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tor_ExitPolicy&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;reject&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;*:*&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tor_hidden_services&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_hidden_services&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tor_hidden_services_parent_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_hidden_services_parent_dir&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;sudo&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;yes&lt;/span&gt;
&lt;span class="p-Indicator"&gt;}&lt;/span&gt;
&lt;span class="p-Indicator"&gt;-&lt;/span&gt; &lt;span class="p-Indicator"&gt;{&lt;/span&gt; &lt;span class="nv"&gt;role&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;ansible-tahoe-lafs&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_introducer_furl&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_introducer_furl&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_storage_enabled&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_hidden_service_name&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_hidden_service_name&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tor_hidden_services_parent_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_hidden_services_parent_dir&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_web_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_web_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_tub_port&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;oniongrid_tub_port&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_shares_needed&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;2&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_shares_happy&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;3&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_shares_total&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;4&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;backports_url&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;http://ftp.de.debian.org/debian/&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;backports_distribution_release&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;wheezy-backports&amp;quot;&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_source_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;/home/human/tahoe-lafs-src&lt;/span&gt;&lt;span class="p-Indicator"&gt;,&lt;/span&gt;
&lt;span class="nv"&gt;tahoe_run_dir&lt;/span&gt;&lt;span class="p-Indicator"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;/home/human/tahoe_client&lt;/span&gt;
&lt;span class="p-Indicator"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Configure your server(s)... &lt;strong&gt;Run the playbook:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ansible-playbook -i onion-storage-inventory oniongrid-storage-nodes.yml -u human
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Tahoe-LAFS"></category><category term="Tor hidden services"></category><category term="Tor"></category></entry><entry><title>"data-less" travel opsec</title><link href="/data-less-travel-opsec.html" rel="alternate"></link><updated>2014-08-11T16:00:00+02:00</updated><author><name>David Stainton</name></author><id>tag:,2014-08-11:data-less-travel-opsec.html</id><summary type="html">&lt;h3&gt;Operational security practices for international travel&lt;/h3&gt;
&lt;p&gt;aka&lt;/p&gt;
&lt;h3&gt;Secure Covert Backup Strategy for Tails using Tahoe-LAFS&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;note:&lt;/strong&gt; Tails is a good choice but this could be applied to other operating systems/Linux distros.
In some ways this article is a continuation of &lt;a href="https://david415.github.io/simple-tails-backup-procedure-with-tahoe-lafs.html"&gt;Simple Tails Backup procedure with Tahoe-LAFS&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;context&lt;/h4&gt;
&lt;p&gt;When traveling in surveilance states where there is risk of search of seizure... &lt;strong&gt;you do not want to be in posession of ciphertext, key material or other sensitive data&lt;/strong&gt;. If you are detained and have ciphertext they can request you for the phassphrase to decrypt your data. Things may not go so well for you if you don't comply with their demands.&lt;/p&gt;
&lt;p&gt;To fulfill this objective of not carrying sensitive data we can choose to either carry benign data like
a Tails disk with no Persistent volume... or no data at all. This means either "secure erasing" your drive(s).
Perhaps some people will opt to not carry any drives at all. 
Of course carrying no drives at all would mean that in the future you'll have to acquire an operating system
and a drive to put it on... like Tails on a USB disk for instance.&lt;/p&gt;
&lt;p&gt;To meet this goal of not carrying any critical data we need to reduce the complexity of 
restoring our confidential backup to two pieces of information
that can be remembered (and should not be written down):&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;passphrase to unlock critical blob&lt;/li&gt;
&lt;li&gt;retreival information of critical blob&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Once you've setup several redundant hiding places for your critical ciphertext blob of Tahoe-LAFS information then you
"secure erase" your drive(s) before traveling.&lt;/p&gt;
&lt;h4&gt;Create your critical ciphertext blob like this:&lt;/h4&gt;
&lt;p&gt;This critical blob contains Tahoe-LAFS cryptographic capabilities and grid connection information.
That is... everything we need to restore all our sensitive data; key material and configuration files in my case.
It's a total loss if an attacker gains access to our Tahoe-LAFS cryptographic capabilities.
We therefore protect this data by symmetrically encrypting with an entropic passphrase.&lt;/p&gt;
&lt;p&gt;Create a textfile containing Tahoe-LAFS onion grid connection information and root cryptographic capability:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;cat &lt;span class="s"&gt;&amp;lt;&amp;lt;EOT&amp;gt;critical&lt;/span&gt;
&lt;span class="s"&gt;export introducer_furl=&amp;#39;pb://MyTubID@MyOnionAddress.onion:OnionPort/SuperSecretSwissnum&amp;#39;&lt;/span&gt;
&lt;span class="s"&gt;root_cap=&amp;#39;URI:DIR2:aaaaaaaaabcaaaaaaaaaaaaaaa:kkkkkkkkkkkkkkfghkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk&amp;#39;&lt;/span&gt;
&lt;span class="s"&gt;[client-server-selection]&lt;/span&gt;
&lt;span class="s"&gt;server.v0-aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.type = tahoe-foolscap&lt;/span&gt;
&lt;span class="s"&gt;server.v0-aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.nickname = RobotKillHuman&lt;/span&gt;
&lt;span class="s"&gt;server.v0-aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.seed = aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&lt;/span&gt;
&lt;span class="s"&gt;server.v0-aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.furl = pb://aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@cccccccccccccccc.onion:34273/cswisssssssssssssssssssssssssnum&lt;/span&gt;
&lt;span class="s"&gt;server.v0-bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.type = tahoe-foolscap&lt;/span&gt;
&lt;span class="s"&gt;server.v0-bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.nickname = RobotPlanetConspiracy&lt;/span&gt;
&lt;span class="s"&gt;server.v0-bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.seed = bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb&lt;/span&gt;
&lt;span class="s"&gt;server.v0-bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb.furl = pb://bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb@dddddddddddddddd.onion:34273/bswisssssssssssssssssssssssssnum&lt;/span&gt;
&lt;span class="s"&gt;server.v0-cccccccccccccccccccccccccccccccc.type = tahoe-foolscap&lt;/span&gt;
&lt;span class="s"&gt;server.v0-cccccccccccccccccccccccccccccccc.nickname = StorageForRobotsOnly&lt;/span&gt;
&lt;span class="s"&gt;server.v0-cccccccccccccccccccccccccccccccc.seed = cccccccccccccccccccccccccccccccc&lt;/span&gt;
&lt;span class="s"&gt;server.v0-cccccccccccccccccccccccccccccccc.furl = pb://ccccccccccccccccccccccccccccccc@eeeeeeeeeeeeeeee.onion:34273/aswissssssssssssssssssssssssssnum&lt;/span&gt;
&lt;span class="s"&gt;EOT&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Unfortunately we have not yet merged Leif Ryge's &lt;a href="https://github.com/leif/tahoe-lafs/tree/truckee"&gt;truckee feature branch&lt;/a&gt; of Tahoe-LAFS upstream.
Use this truckee so that you have my &lt;strong&gt;introducer-less&lt;/strong&gt; feature which allows you to specify storage node connection information
directly in your &lt;strong&gt;tahoe.cfg&lt;/strong&gt;... thus eliminating the introducer node as the single point of failure and success.&lt;/p&gt;
&lt;p&gt;Currently I use DJB's NaCl SecretBox to verifiably encrypt/decrypt the critical connection
information and root cap like this:
&lt;a href="https://github.com/david415/hidden-tahoe-backup/blob/master/HiddenTahoeBackup/secretBox.py"&gt;secretBox.py&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;./secretBox.py --encrypt critical &amp;gt; critical.secretbox
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Make sure to pick a long entropic passphrase with enough interesting words.&lt;/p&gt;
&lt;h4&gt;What does retrieval information of critical blob mean?&lt;/h4&gt;
&lt;p&gt;Your threat model may permit you to publicly stash your critical blob
in a memorable location such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;on a gist or github repo&lt;/li&gt;
&lt;li&gt;in a tweet&lt;/li&gt;
&lt;li&gt;in a blog post&lt;/li&gt;
&lt;li&gt;web host at memorable url&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On the other hand your threat model may advise against exposing your critical blob to cryptanalysis...
You might prefer more covert methods of recovery:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;use ssh to retreive the file from a private shell account&lt;/li&gt;
&lt;li&gt;Pond message a friend; retreive from friend directly&lt;/li&gt;
&lt;li&gt;PGP e-mail a friend; retreive from friend directly&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Restore procedure:&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;acquire Tails disk&lt;/li&gt;
&lt;li&gt;acquire critical ciphertext blob&lt;/li&gt;
&lt;li&gt;decrypt ciphertext blob&lt;/li&gt;
&lt;li&gt;configure Tahoe-LAFS client&lt;/li&gt;
&lt;li&gt;download all your private data&lt;/li&gt;
&lt;/ol&gt;</summary><category term="Tails"></category><category term="Tahoe-LAFS"></category><category term="Tor hidden services"></category><category term="Tor"></category></entry><entry><title>simple Tails backup procedure with Tahoe-LAFS</title><link href="/simple-tails-backup-procedure-with-tahoe-lafs.html" rel="alternate"></link><updated>2014-08-11T13:00:00+02:00</updated><author><name>David Stainton</name></author><id>tag:,2014-08-11:simple-tails-backup-procedure-with-tahoe-lafs.html</id><summary type="html">&lt;h4&gt;securely backup your &lt;a href="https://tails.boum.org/doc/first_steps/persistence/index.en.html"&gt;Tails persistent volume&lt;/a&gt; using Tahoe-LAFS over Tor&lt;/h4&gt;
&lt;p&gt;This HOWTO requires you to have access to a &lt;strong&gt;Tahoe-LAFS storage grid&lt;/strong&gt;.
You have 2 choices:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;build your own Tahoe-LAFS storage grid&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;purchase Tahoe-LAFS storage grid access from &lt;a href="https://leastauthority.com/"&gt;LeastAuthority&lt;/a&gt; or other companies&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;why Tahoe-LAFS?&lt;/h3&gt;
&lt;p&gt;Do you backup your personal data?&lt;/p&gt;
&lt;p&gt;Using Dropbox, AWS storage or Google Drive to backup data doesn't give users control over the confidentiality of their data.
But we have a choice! We can choose to use verified end to end crypto (read the &lt;a href="http://www.activism.net/cypherpunk/manifesto.html"&gt;cypherpunks manifesto&lt;/a&gt;).
When you use Tahoe-LAFS you are choosing to be in control of the verifiability, confidentiality and erasure encoding of your data.&lt;/p&gt;
&lt;p&gt;Tahoe-LAFS storage servers only see ciphertext blobs... additionally the Tahoe-LAFS cryptographic "capabilities model"
is essentially a distributed access control system. The storage servers do not authorize access to data; instead the possessor
of the cryptographic capabilities can choose to share that capability... or "diminish" the cap before sharing;
for instance ReadWrite caps can be dimished into ReadOnly caps etc.&lt;/p&gt;
&lt;h3&gt;why Tails?&lt;/h3&gt;
&lt;p&gt;Tails being a security hardened and easy to use Linux distribution is an excellent platform
from which to run Tahoe-LAFS. Using Tails ensures that novice computer users can leverage Tahoe-LAFS's
security features while reducing their risk of exposing another weak link in their system's security.
The Tails dev team pays careful attention to entropy generation, clock sychronization,
user space and kernel security hardening, firewall rules, frequent software security updates,
expert peer review etc.&lt;/p&gt;
&lt;h4&gt;requirements:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Tails 1.1 or higher&lt;/li&gt;
&lt;li&gt;connecting information to a Tahoe-LAFS grid:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A Tahoe-LAFS introducer FURL takes this form:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nl"&gt;pb:&lt;/span&gt;&lt;span class="c1"&gt;//TubID@MyOnion:OnionPort/swissnum&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;...and looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nl"&gt;pb:&lt;/span&gt;&lt;span class="c1"&gt;//dsagndsgmndsg6dgnqtug983nfmsdh8g@dfd2jdhfgfh8shdf.onion:33000/agkhdags7gdslgshhsg98gsndsag8fdn&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;procedure :&lt;/h3&gt;
&lt;h3&gt;step 0: Install Tahoe-LAFS and create your configuration&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get install tahoe-lafs
tahoe client-create ~/Persistent/.tahoe
ln -s ~/Persistent/.tahoe ~/.tahoe
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;replace ~/Persistent/.tahoe/tahoe.cfg with a config file like this:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;[node]&lt;/span&gt;
&lt;span class="na"&gt;nickname&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;client&lt;/span&gt;
&lt;span class="na"&gt;web.reveal_storage_furls&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;true&lt;/span&gt;
&lt;span class="na"&gt;web.port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;tcp:7657:interface=127.0.0.1&lt;/span&gt;
&lt;span class="na"&gt;web.static&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;public_html&lt;/span&gt;
&lt;span class="na"&gt;tub.location&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;client.fakelocation:1&lt;/span&gt;
&lt;span class="k"&gt;[client]&lt;/span&gt;
&lt;span class="na"&gt;introducer.furl&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;pb://MyTubID@myHiddenService.onion:HiddenPort/introducer&lt;/span&gt;
&lt;span class="na"&gt;shares.needed&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;3&lt;/span&gt;
&lt;span class="na"&gt;shares.happy&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;5&lt;/span&gt;
&lt;span class="na"&gt;shares.total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;5&lt;/span&gt;
&lt;span class="k"&gt;[storage]&lt;/span&gt;
&lt;span class="na"&gt;enabled&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;false&lt;/span&gt;
&lt;span class="k"&gt;[helper]&lt;/span&gt;
&lt;span class="na"&gt;enabled&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;false&lt;/span&gt;
&lt;span class="k"&gt;[drop_upload]&lt;/span&gt;
&lt;span class="na"&gt;enabled&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;false&lt;/span&gt;
&lt;span class="k"&gt;[client-server-selection]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; you'll want to adjust the shares.needed/happy/total appropriately for your grid!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NOTE: You absolutely must use the "tub.location" option otherwise
Tahoe-LAFS will attempt to deanonymize your IP to the Introducer node.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; We are reusing the I2P console port configuration in Tails for our own Tahoe-LAFS purposes... rather than show you how to modify the Tails ferm and foxyproxy configurations. That is, in the &lt;strong&gt;tahoe.cfg&lt;/strong&gt; file the &lt;strong&gt;web.port&lt;/strong&gt;
is set to &lt;strong&gt;"tcp:7657:interface=127.0.0.1"&lt;/strong&gt;
This allows you to view the url in the Tails browser:
&lt;a href="http://127.0.0.1:7657/"&gt;http://127.0.0.1:7657/&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;step 1:  start your Tahoe-LAFS client&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;usewithtor tahoe start
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;the tahoe node directory defaults to ~/.tahoe...
so you must either setup a symlink or
you can specify the tahoe node directory in the tahoe command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;usewithtor&lt;/span&gt; &lt;span class="n"&gt;tahoe&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="n"&gt;elsewhere&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tahoe&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You'll want to check the gateway status using this URL before moving on to the next step:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://127.0.0.1:7657/"&gt;http://127.0.0.1:7657/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Once the gateway status page indicates your Tahoe-LAFS client has connected
to most of the grid then you can use Tahoe-LAFS to backup/restore files.&lt;/p&gt;
&lt;h3&gt;step 2: use Tahoe-LAFS to backup your Tails disk&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;create a backup alias&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;tahoe&lt;/span&gt; &lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;alias&lt;/span&gt; &lt;span class="n"&gt;tails_backup&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;perform backups!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Perform the backup using the "tails_backup" alias like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;tahoe backup --verbose ~/.ssh tails_backup:dotssh
tahoe backup --verbose ~/.gnupg tails_backup:dotgnupg
tahoe backup --verbose ~/Persistent tails_backup:Persistent
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I ammend the last command to exclude some files like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;tahoe backup --verbose --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ansible-tahoe-base*&amp;#39;&lt;/span&gt; --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;incidents*&amp;#39;&lt;/span&gt; --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;twistd.log&amp;#39;&lt;/span&gt; --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;projects*&amp;#39;&lt;/span&gt; --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;tahoe-lafs*&amp;#39;&lt;/span&gt; --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Music*&amp;#39;&lt;/span&gt; --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;virtenv-*&amp;#39;&lt;/span&gt; --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;virtualenv-*&amp;#39;&lt;/span&gt; --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;go*&amp;#39;&lt;/span&gt; --exclude&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;*.iso&amp;#39;&lt;/span&gt; ~/Persistent tails_backup:Persistent
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;step 3: restore data&lt;/h3&gt;
&lt;p&gt;Generally you can restore your data like this from the latest snapshots:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;tahoe cp --verbose -r tails_backup:dotssh/Latest ~/.ssh
tahoe cp --verbose -r tails_backup:dotgnupg/Latest ~/.gnupg
tahoe cp --verbose -r tails_backup:Persistent/Latest ~/Persistent
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Or you might want to restore from an old snapshot in the archives:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;tahoe cp --verbose -r tails_backup:Persistent/Archives/2014-07-27_12:11:41Z ~/Persistent
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Of course to restore data from a total system data loss you will have to have
an accessible backup of either your Tahoe-LAFS nodeDir (e.g. ~/.tahoe) or
the Introducer FURL and any Tahoe capability aliases you used to store data on.&lt;/p&gt;
&lt;p&gt;I've got an opsec procedure for data-less travel and restore from onion grid;
it's designed around encapsulating all the needed information in a small symmetrically encrypted blob
that is hidden before wiping the drive(s) in preparation for international travel; thus temporarily locking
the user out of all infrastructure and private key materials in case of search and seizure.
Here's my attempt to automate much of this procedure:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/david415/hidden-tahoe-backup"&gt;https://github.com/david415/hidden-tahoe-backup&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Appendix A: Renew leases and Repair Tahoe-LAFS data&lt;/h3&gt;
&lt;p&gt;In the future after performing backups... if you want to be extra safe before a restore situation arises then
it would be advisable to perform a repair on the data:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;tahoe deep-check --repair --add-lease --verbose tails_backup:dotssh
tahoe deep-check --repair --add-lease --verbose tails_backup:dotgnupg
tahoe deep-check --repair --add-lease --verbose tails_backup:Persistent
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or perhaps you only care about repairing the latest snapshot:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;tahoe deep-check --repair --add-lease --verbose tails_backup:dotssh/Latest
tahoe deep-check --repair --add-lease --verbose tails_backup:dotgnupg/Latest
tahoe deep-check --repair --add-lease --verbose tails_backup:Persistent/Latest
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Appendix B: additional considerations for Tails users&lt;/h3&gt;
&lt;p&gt;You'll probably want to setup a dotfiles symlink for your .tahoe directory:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;amnesia@amnesia:/live/persistence/TailsData_unlocked/dotfiles&lt;span class="nv"&gt;$ &lt;/span&gt;ln -s ~/Persistent/.tahoe
amnesia@amnesia:/live/persistence/TailsData_unlocked/dotfiles&lt;span class="nv"&gt;$ &lt;/span&gt;ls -la .tahoe
lrwxrwxrwx 1 amnesia amnesia 31 Aug 12 01:32 .tahoe -&amp;gt; /home/amnesia/Persistent/.tahoe
amnesia@amnesia:/live/persistence/TailsData_unlocked/dotfiles&lt;span class="nv"&gt;$ &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As root add "tahoe-lafs" to /live/persistence/TailsData_unlocked/live-additional-software.conf so that your persistent volume will store
a copy of the Tahoe-LAFS package which gets installed upon bootup.&lt;/p&gt;
&lt;h3&gt;Appendix C: why use torsocks (usewithtor)? got native Tor integration?&lt;/h3&gt;
&lt;p&gt;Yes... we are working on it... and we'll have native Tor integration for
Tahoe-LAFS soon:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://tahoe-lafs.org/trac/tahoe-lafs/ticket/517#comment:20"&gt;https://tahoe-lafs.org/trac/tahoe-lafs/ticket/517#comment:20&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://foolscap.lothar.com/trac/ticket/203"&gt;http://foolscap.lothar.com/trac/ticket/203&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Appendix D: basic info&lt;/h3&gt;
&lt;h4&gt;what the hell is an onion grid?&lt;/h4&gt;
&lt;p&gt;An onion grid refers to a Tahoe-LAFS storage grid, a collection of Tahoe-LAFS storage servers
that are only accessible via Tor hidden services. That means the identity/location of the
storage servers are protected by the Tor network.&lt;/p&gt;
&lt;p&gt;At this time the Tor Project is redesigning Tor hidden services to have more powerful security and anonymity guarantees; &lt;a href="https://blog.torproject.org/blog/hidden-services-need-some-love"&gt;Tor hidden services need some love&lt;/a&gt;.
Endeavors using Tahoe-LAFS onion grids will benefit from these future design changes to Tor Hidden Services.&lt;/p&gt;
&lt;h4&gt;more info&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://tails.boum.org/"&gt;Tails project website&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.torproject.org/"&gt;Tor project website&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.torproject.org/docs/hidden-services.html.en"&gt;Tor Hidden Servies explained&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://tahoe-lafs.org/trac/tahoe-lafs"&gt;Tahoe-LAFS project website&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://www.laser.dist.unige.it/Repository/IPI-1011/FileSystems/TahoeDFS.pdf"&gt;my favorite white paper about Tahoe-LAFS&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary><category term="Tails"></category><category term="Tahoe-LAFS"></category><category term="Tor hidden services"></category><category term="Tor"></category></entry></feed>